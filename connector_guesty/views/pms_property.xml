<odoo>
    <record id="guesty_custom_view_pms_property" model="ir.ui.view">
        <field name="name">pms.property.form.custom</field>
        <field name="model">pms.property</field>
        <field name="priority">100</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <style>
                        .oe_avatar_512 > img {
                        width: 256px;
                        max-width: 512px !important;
                        max-height: 512px !important;
                        }
                    </style>
                    <field
                        name="image_1920"
                        widget="image"
                        class="oe_avatar"
                        options="{'preview_image': 'image_256'}"
                    />
                    <div class="oe_title">
                        <label for="ref" string="Nickname" />
                        <h1>
                            <field name="ref" />
                        </h1>
                        <label for="name" string="Description" />
                        <field name="name" widget="text" />
                    </div>
                    <group id="main">
                        <group id="main-left">
                            <label for="street" string="Address" />
                            <div class="o_address_format">
                                <field
                                    name="street"
                                    placeholder="Street..."
                                    class="o_address_street"
                                />
                                <field
                                    name="street2"
                                    placeholder="Street 2..."
                                    class="o_address_street"
                                />
                                <field
                                    name="city"
                                    placeholder="City"
                                    class="o_address_city"
                                />
                                <field
                                    name="state_id"
                                    class="o_address_state"
                                    placeholder="State"
                                    options="{&quot;no_open&quot;: True}"
                                    context="{'country_id': country_id, 'zip': zip}"
                                />
                                <field
                                    name="zip"
                                    placeholder="ZIP"
                                    class="o_address_zip"
                                />
                                <field
                                    name="country_id"
                                    placeholder="Country"
                                    class="o_address_country"
                                    options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                />
                            </div>
                        </group>
                        <group id="main-right">
                            <field name="parent_id" domain="[('id', '!=', id)]" />
                            <field name="tz" />
                            <field
                                name="owner_id"
                                domain="[('is_property', '=', False)]"
                            />
                            <field
                                name="company_id"
                                groups="base.group_multi_company"
                            />
                            <field name="tag_ids" widget="many2many_tags" />
                            <field name="team_id" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="custom_guesty_property_action" model="ir.actions.act_window">
        <field name="name">Properties</field>
        <field name="res_model">pms.property</field>
        <field name="view_mode">tree,form</field>
        <field
            name="view_ids"
            eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('pms_base.view_pms_property_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('guesty_custom_view_pms_property')})]"
        />
    </record>

    <menuitem
        id="guesty_custom_property_menu"
        name="Properties (Advanced)"
        action="custom_guesty_property_action"
        parent="pms_base.menu_data"
    />

    <record id="guesty_view_pms_property_form" model="ir.ui.view">
        <field name="name">pms.property.form</field>
        <field name="model">pms.property</field>
        <field name="inherit_id" ref="pms_base.view_pms_property_form" />
        <field name="priority">20</field>
        <field name="arch" type="xml">
            <!--            <xpath expr="//label[@for='name']" position="replace">-->
            <!--                <label for="ref" string="Short Code"/>-->
            <!--            </xpath>-->
            <!--            <xpath expr="//field[@name='ref']" position="replace"/>-->
            <!--            <xpath expr="//field[@name='name']" position="replace">-->
            <!--                <field name="ref"/>-->
            <!--            </xpath>-->
            <!--            <xpath expr="//h1" position="after">-->
            <!--                <field name="name" widget="text"/>-->
            <!--            </xpath>-->
            <xpath expr="//div[@name='button_box']" position="inside">
                <button
                    name="action_airbnb_link"
                    type="object"
                    class="oe_stat_button"
                    icon="fa-globe"
                    attrs="{'invisible': [('airbnb_url_link', '=', False)]}"
                >
                    <field name="airbnb_url_link" invisible="1" />
                    <span>Airbnb</span>
                </button>
            </xpath>
            <xpath expr="//header" position="inside">
                <button
                    name="action_guesty_push_property"
                    string="Publish to Guesty"
                    type="object"
                />
                <button name="property_get_price" string="Test Date" type="object" />
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page string="Guesty Technical Info">
                    <group>
                        <group>
                            <field name="guesty_id" string="Guesty ID" readonly="1" />
                            <field name="airbnb_url_link" />
                        </group>
                    </group>
                </page>
                <page string="Calendar">
                    <field name="calendar_ids" readonly="1">
                        <tree
                            decoration-success="state=='available'"
                            decoration-danger="state!='available'"
                        >
                            <field name="listing_date" />
                            <field name="state" />
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="view_guesty_pms_property_search">
        <field name="name">pms.property.search</field>
        <field name="model">pms.property</field>
        <field name="inherit_id" ref="pms_base.view_pms_property_search" />
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='active']" position="after">
                <separator />
                <filter
                    string="In Guesty"
                    name="guesty_ok"
                    domain="[('guesty_id', '!=', False)]"
                />
            </xpath>
        </field>
    </record>

</odoo>
